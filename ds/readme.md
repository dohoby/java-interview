# 分布式基础理论
## 分布式系统特点：
### 并发性
共享资源，采取ACID或Base原则，见：CAP定理。分布式系统设计遵循CAP定理， CAP是：Consistency(一致性), Availability(可用性), 和 Partition tolerance(分区容错性) 可靠性 简称，CAP定理认为，CAP三种之中，只能同时满足其中两种。

### 可扩展性Scalable是重要特点，
通过扩展能够获得高性能 高吞吐量 低延迟Latency。

### 可靠性/可用性
故障发现和处理以及恢复 容错处理。在一个正常运作系统中存在一个时间比例的条件。 如果一个用户不能访问系统比例增大，它被认为是不可用。可用性公式：
Availability = uptime / (uptime + downtime)
容错failover是指一个系统在错误发生的情况下，仍然一切运行正常。表示这个系统是宽容错误的。

### 消息处理
具体产品有：RabbitMQ ZeroMQ Netty等等。

### 异构性
不同操作系统 硬件 程序语言 开发者，中间件是一种解决方案。

### 安全性
授权认证 SSO单点登录 Oauth等等。

### 定位命令：
* 标识资源 URLs
* 命名服务Naming services
* 定位寻找Lookup
* 主要见SOA中的服务查找。如Zookeeper实现服务查找。

### 透明性
1. 访问透明度： 使用相同的操作本地和远程资源
2. 位置透明：访问资源无需知道其物理或网络位置
3. 并发透明度：多个进程可以同时运行访问使用共享资源，当不能干扰堵塞 它们的处理进程
4. 复制透明性： 资源的多个实例可以被用来复制以提高可靠性和性能，但无需由用户编制专门的应用程序来实现。
5. 故障透明度：出现软件硬件故障时，使用户和应用方案能继续完成他们的任务不受影响。
6. 移动透明度：允许在 系统存在移动的资源和客户。
7. 性能透明度：允许系统重新配置以 提高性能负荷变化
8. 缩放透明度：在应用程序结构没有变化的情况下能够在规模上扩展或伸缩系统，以提高吞吐量处理能力。　　

## cap理论
定理：任何分布式架构都只能同时满足两点，无法三者兼顾。
* Consistency（一致性），数据一致更新，所有的数据变动都是同步的。
* Availability（可用性），好的响应性能。
* Partition tolerance（分区容忍性）可靠性，机器宕机是否影响使用。

## base理论
* Basically Available 基本可用，支持分区失败
* Soft state 软状态，允许状态某个时间短不同步，或者异步
* Eventually consistent 最终一致性，要求数据最终结果一致，而不是时刻高度一致。

## paxos协议
它允许一组不一定可靠的处理器（服务器）在某些条件得到满足情况下就能达成确定的安全的共识，如果条件不能满足也确保这组处理器（服务器）保持一致。

### 实现
集群有leader节点和follow节点组成，所有的事务操作必须有leader发起，如果请求在follow节点则转发到leader节点。leader对于所有的事务操作，会发起事务提议，必须半数以上节点同意，此事务才能提交，保证数据一致性。不满足条件，事务会被丢弃。

## zab协议
zab协议其实是zookeeper根据paxos的自行实现，大同小异。

## raft协议
Paxos和Raft都是为了实现Consensus一致性这个目标，这个过程如同选举一样，参选者需要说服大多数选民(服务器)投票给他，一旦选定后就跟随其操作。Paxos和Raft的区别在于选举的具体过程不同。

### 在Raft中，任何时候一个服务器可以扮演下面角色之一：

* Leader: 处理所有客户端交互，日志复制等，一般一次只有一个Leader.
* Follower: 类似选民，完全被动
* Candidate候选人: 类似Proposer律师，可以被选为一个新的领导人。

## soa

### 优点
1. 松耦合：由于服务自治，有一定封装边界，服务调用交互是通过发布接口。应用程序不关心服务如何被实现。
2. 位置透明：服务的消费者不必关系服务位于什么地方。
3. 可在异构平台间复用。可以将遗留系统包装成服务。
4. 便于测试，能并行开发，较高可靠性和良好可伸缩性。

## rpc

## 微服务
